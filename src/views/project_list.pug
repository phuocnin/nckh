extends index

block content 
  .col-lg-12
    .card.card-outline.card-success
      .card-header
      .card-tools
        a.btn.btn-block.btn-sm.btn-default.btn-flat.border-primary(href="./index.php?page=new_project")
          i.fa.fa-plus
          | Thêm đề tài
      .card-body
        table.table.tabe-hover.table-condensed#list
          colgroup
            col(width="5%")
            col(width="35%")
            col(width="15%")
            col(width="15%")
            col(width="20%")
            col(width="10%")
          thead
            tr
              th.text-center #
              th Project
              th Ngày bắt đầu
              th Hạn cuối
              th Trạng thái
              th Hoạt động
          tbody
            tr
              th.text-center
                // ?
                | 
                            
              td
                | 
                                
                p
                  b < ?>
                p
                  b
                    p.truncate
                      // ? ?
              td
                b
                  // ? ?
              td
                b
                  // ? ?
              td.text-center.
                
                
              td.text-center
                button.btn.btn-default.btn-sm.btn-flat.border-info.wave-effect.text-info.dropdown-toggle(type="button", data-toggle="dropdown", aria-expanded="true").
                    
                    Hoạt động
                    
                .dropdown-menu
                  a.dropdown-item.view_project(href="./index.php?page=view_project&id=<? ?>", data-id="<? ?>") Xem
                  .dropdown-divider
                  a.dropdown-item(href="./index.php?page=edit_project&id=<??>") Chỉnh sửa
                  .dropdown-divider
                  a.dropdown-item.delete_project(href="javascript:void(0)", data-id="<??>") Xóa
  style.
    table p{
      margin: unset !important;
    }
    table td{
      vertical-align: middle !important;
    }
    
  script.
    $(document).ready(function(){
      $('#list').dataTable()
        
      $('.delete_project').click(function(){
        _conf("Are you sure to delete this project?","delete_project",[$(this).attr('data-id')])
      })
    })
    
    function delete_project($id){
      start_load()
      $.ajax({
        url:'ajax.php?action=delete_project',
        method:'POST',
        data:{id:$id},
        success:function(resp){
          if(resp==1){
            alert_toast("Data successfully deleted",'success')
            setTimeout(function(){
              location.reload()
            },1500)
          }
        }
      })
    }
