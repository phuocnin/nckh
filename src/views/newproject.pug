extends index

block content
    .col-lg-12
        .card.card-outline.card-primary
            .card-body
                form#manage-project(action='ajax.php?action=save_project', method='POST')
                    input(type='hidden', name='id', value='')
                    .row
                        .col-md-6
                            .form-group
                                label.control-label(for='name') Tên dự án
                                input.form-control.form-control-sm(type='text', name='name', value='')
                        .col-md-6
                            .form-group
                                label(for='status') Trạng thái
                                select#status.custom-select.custom-select-sm(name='status')
                                    option(value='0') CHưa giải quyết
                                    option(value='3') Tạm dừng
                                    option(value='5') Hoàn thành
                    .row
                        .col-md-6
                            .form-group
                                label.control-label(for='start_date') Ngày bắt đầu
                                input.form-control.form-control-sm(type='date', autocomplete='off', name='start_date', value='')
                        .col-md-6
                            .form-group
                                label.control-label(for='end_date') Ngày kết thúc
                                input.form-control.form-control-sm(type='date', autocomplete='off', name='end_date', value='')
                    .row
                        .col-md-6
                            .form-group
                                label.control-label(for='manager_id') Người quản lý dự án
                                select.form-control.form-control-sm.select2(name='manager_id')
                                    //- You may dynamically generate options based on your data
                                    //- Example: each row in a variable 'users' containing { id, name }
                                    //-         option(value=user.id)= user.name
                                    option
                                    option(value='<?php echo $row["id"] ?>') <?php echo $row["name"] ?>
                            
                        input(type='hidden', name='manager_id', value='')
                        .col-md-6
                            .form-group
                                label.control-label(for='user_ids') Thành viên nhóm dự án
                                select.form-control.form-control-sm.select2(multiple, name='user_ids[]')
                                    option
                    .row
                        .col-md-10
                            .form-group
                                label.control-label(for='description') Mô tả
                                textarea.summernote.form-control(name='description', cols='30', rows='10').
                    .row 
                        .col-md-6             
                            .form-group
                                label.control-label(for="") Avatar
                                .custom-file
                                input(type="file" class="custom-file-input" id="customFile" name="img" onchange="displayImg(this,$(this))")
                                label.custom-file-label(for="customFile") Chọn file
                    .row 
                        .col-md-10            

        .card-footer.border-top.border-info
            .d-flex.w-100.justify-content-center.align-items-center
                button.btn.btn-flat.bg-gradient-primary.mx-2(type='submit', form='manage-project') Save
                button.btn.btn-flat.bg-gradient-secondary.mx-2(type='button', onclick="location.href='index.php?page=project_list'") Cancel
    script.
        $('#manage-project').submit(function(e){
            e.preventDefault();
            start_load();
            $.ajax({
                url: $(this).attr('action'),
                data: new FormData($(this)[0]),
                cache: false,
                contentType: false,
                processData: false,
                method: 'POST',
                success:function(resp){
                    if(resp == 1){
                        alert_toast('Data successfully saved', 'success');
                        setTimeout(function(){
                            location.href = 'index.php?page=project_list';
                        }, 2000);
                    }
                }
            });
        });
